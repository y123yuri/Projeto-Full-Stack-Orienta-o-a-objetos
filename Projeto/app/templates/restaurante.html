<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nome do Restaurante - Avalia√ß√£o e Coment√°rios</title>
    <link rel="stylesheet" href="/static/css/restaurante.css" />
  </head>
  <body>
    <header>
      <!-- Bot√£o de favorito -->
      <button class="favorite" data-id="{{ restaurante.id }}" onclick="toggleFavorite('{{ restaurante.id }}')">‚ô°</button>
      <h1 class="titulo">{{ restaurante.nome }}</h1>
      <span class="rating">‚≠ê {{ restaurante.avaliacoes }} / 5 </span>
      <button class="open-modal" onclick="openModal()">‚ò∞</button>

      <div class="modal" id="menuModal">
        <div class="modal-content">
          <button class="close-modal" onclick="closeModal()">√ó</button>
          <h2>Menu</h2>
          <div class="menu">
            <a href="{{ url_for('home') }}">Home</a>
            {% if session.get('usuario_id') %}
            <a href="{{ url_for('perfil') }}">Perfil</a>
            {% else %}
            <a href="{{ url_for('cadastro') }}">Cadastro</a>
            <a href="{{ url_for('login') }}">Login</a>
            {% endif %}
          </div>
        </div>
      </div>
    </header>
    
  
    <script>
      function openModal() {
        document.getElementById("menuModal").style.display = "flex";
      }

      function closeModal() {
        document.getElementById("menuModal").style.display = "none";
      }
    </script>

    <!-- Galeria de imagens -->
    <section class="gallery">
      <h2>üì∏ Fotos</h2>
      <div class="slider" id="imageSlider"></div>
      <div class="thumbnails" id="thumbnails"></div>

      <div class="slider-buttons">
        <button onclick="prevSlide()">‚ùÆ</button>
        <button onclick="nextSlide()">‚ùØ</button>
      </div>
    </section>

    <main class="content">
      
      <section class="Maps">

        <h3 class="localizacao">üìçLocaliza√ß√£o</h3>
        {% if restaurante.link_maps %}
        <a href="{{ restaurante.link_maps }}" class="laranja" target="_blank">Ver no Google Maps</a>
        {% else %}
        <span class="laranja">N√£o possui link</span>
        {% endif %}
      
        <h3>üìúEndere√ßo</h3>
        <p class="laranja">{{ restaurante.endereco }}</p>

        <h3>üìûTelefone</h3>
        <p class="laranja">{{ restaurante.telefone }}</p>

       
        

      </section>
      
      <section class="info">
        <p class="descricao">
          {{ restaurante.descricao | default("O restaurante n√£o possui descri√ß√£o", true) }}
        </p>
      </section>

      <section class="reviews">
        <h2 style="text-align: center;">üí¨ Avalia√ß√µes</h2>
        
        
        <section class="comentario">
          <div id="comentariosLista">
           
            {% for comentario in comentarios_fake %}
             <div class="comment">
          <strong>{{ comentario.nome }}:</strong> {{ comentario.conteudo }}
        </div>
        {% endfor %}
            {% for comentario in comentarios %}
            <div class="comment">
              <strong>{{ comentario.user.username }}:</strong> {{ comentario.conteudo }}
            </div>
            {% endfor %}
          </div>
          </div>
        </section>
        
        <script>
          function scrollParaNovoComentario() {
            var comentariosLista = document.getElementById("comentariosLista");
            comentariosLista.scrollTop = comentariosLista.scrollHeight;
          }
        
          // Simula√ß√£o de um novo coment√°rio sendo adicionado
          function adicionarComentario() {
            var novoComentario = document.createElement("div");
            novoComentario.classList.add("comment");
            novoComentario.innerHTML = `<strong>Usu√°rio:</strong> "Novo coment√°rio de teste"`;
            
            var lista = document.getElementById("comentariosLista");
            lista.appendChild(novoComentario);
        
            // Rolagem autom√°tica para o novo coment√°rio
            scrollParaNovoComentario();
          }
        </script>
        
      
        <form id="comentarioForm">
          <textarea id="comentarioInput" placeholder="Deixe seu coment√°rio..." required></textarea>
          <input type="hidden" id="restauranteId" value="{{ restaurante.id }}">
          <button type="submit">Enviar</button>
        </form>
      </section>
    </main>

    <!-- Vari√°vel fotos antes do script -->
    <script>
      var fotos = JSON.parse('{{ fotos | safe }}');
    </script>
    
    <script src="/static/js/restaurante.js"></script>
  </body>
</html>
