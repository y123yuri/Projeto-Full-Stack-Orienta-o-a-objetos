<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nome do Restaurante - Avaliação e Comentários</title>
    <link rel="stylesheet" href="/static/css/restaurante.css" />
  </head>
  <body>
    <header>
      <!-- Botão de favorito -->
      <button class="favorite" data-id="{{ restaurante.id }}" onclick="toggleFavorite('{{ restaurante.id }}')">♡</button>
      <h1 class="titulo">{{ restaurante.nome }}</h1>
      <span class="rating">⭐ {{ restaurante.avaliacoes }} / 5 </span>
      <!-- <a href="home" class="botao-voltar">⮜--</a> -->
      <button class="open-modal" onclick="openModal()">☰</button>

      <div class="modal" id="menuModal">
        <div class="modal-content">
          <button class="close-modal" onclick="closeModal()">×</button>
          <h2>Menu</h2>
          <div class="menu">
            <a href="{{ url_for('home') }}">Home</a>
            {% if session.get('usuario_id') %}
            <a href="{{ url_for('perfil') }}">Perfil</a>
            {% else %}
            <a href="{{ url_for('cadastro') }}">Cadastro</a>
            <a href="{{ url_for('login') }}">Login</a>
            {% endif %}
          </div>
        </div>
      </div>
    </header>
    <script>
      function openModal() {
        document.getElementById("menuModal").style.display = "flex";
      }

      function closeModal() {
        document.getElementById("menuModal").style.display = "none";
      }
    </script>


    <!-- Galeria de imagens -->
    <section class="gallery">
      <h2>📸 Fotos</h2>
      <div class="slider">
        <img src="{{ restaurante.fotos[0] }}" alt="Foto do restaurante" class="active" />
        <img src="{{ restaurante.fotos[1] }}" alt="Prato especial" />
        <img src="{{ restaurante.fotos[2] }}" alt="Ambiente do restaurante" />
        <img src="{{ restaurante.fotos[3] }}" alt="Foto do " />
        <img src="{{ restaurante.fotos[4] }}" alt="Prato" />
        <img src="{{ restaurante.fotos[5] }}" alt="Ambiente do" />
        <div class="slider-buttons">
          <button onclick="prevSlide()">❮</button>
          <button onclick="nextSlide()">❯</button>
        </div>
      </div>
      <div class="thumbnails">
        <img src="{{ restaurante.fotos[0] }}" onclick="goToSlide(0)" class="active" />
        <img src="{{ restaurante.fotos[1] }}" onclick="goToSlide(1)" />
        <img src="{{ restaurante.fotos[2] }}" onclick="goToSlide(2)" />
        <img src="{{ restaurante.fotos[3] }}" onclick="goToSlide(3)" />
        <img src="{{ restaurante.fotos[4] }}" onclick="goToSlide(4)" />
        <img src="{{ restaurante.fotos[5] }}" onclick="goToSlide(5)" />
      </div>
    </section>

    <main class="content">
      <section class="info">
        <p class="descricao">
          {{ restaurante.descricao | default("O restaurante não possui descrição", true) }}
        </p>

        <h2>📍 Localização</h2>

        {% if restaurante.link_maps %}
        <a href="{{ restaurante.link_maps }}" class="laranja" target="_blank">Ver no Google Maps</a>
        {% else %}
        <span class="laranja">Não possui link</span>
        {% endif %}

        <h2>📞 Telefone</h2>
        <p class="laranja">{{ restaurante.telefone }}</p>

        <h2>📜 Endereço</h2>
        <p class="laranja">{{restaurante.endereco}}</p>
      </section>
      
      <section class="reviews">
        <h2>💬 Avaliações</h2>
        <div class="comment">
        {%for comentario in comentarios_fake %}
          <strong>{{comentario.nome}}:</strong> {{comentario.conteudo}}
        </div>
        <div class="comment">
        </div>
        <divdiv>
        {%endfor%}
        <section class="reviews">
          <div id="comentariosLista">
              {% for comentario in comentarios %}
                  <div class="comment">
                      <strong>{{ comentario.user.username }}:</strong> "{{ comentario.conteudo }}"
                  </div>
              {% endfor %}
          </div>
      </section>


        <form id="comentarioForm" action="{{ url_for('adicionar_comentario', restaurante_id=restaurante.id) }}">
          <textarea id="comentarioTexto" placeholder="Deixe seu comentário..." required></textarea>
          <button type="submit">Enviar</button>
        </form>
      </section>
    </main>
    <script src="/static/js/restaurante.js"></script>
    
  </body>
</html>
